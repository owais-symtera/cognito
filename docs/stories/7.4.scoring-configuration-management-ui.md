# Story 7.4: Scoring Configuration Management UI

## Status
Completed

## Story
**As a** System Administrator,
**I want** a web interface to manage technology scoring parameters and ranges dynamically,
**so that** scoring criteria can be adjusted without code changes while maintaining pharmaceutical compliance audit trails.

## Acceptance Criteria
1. Admin dashboard for viewing/editing scoring parameters (Dose, MW, Melting Point, Log P) with weightages
2. Scoring range configuration UI for Transdermal and Transmucosal delivery methods
3. Visual scoring matrix editor with drag-and-drop range adjustments and validation
4. Bulk import/export functionality for scoring configurations (CSV/Excel support)
5. Version history tracking for all scoring configuration changes with rollback capability
6. Real-time preview of scoring calculations with test parameter inputs
7. Role-based access control (Admin: edit, Analyst: view-only, Auditor: view with history)

## Tasks / Subtasks
- [ ] Create admin dashboard component for parameter management (AC: 1)
- [ ] Build scoring range configuration interface (AC: 2)
- [ ] Implement visual matrix editor with validation (AC: 3)
- [ ] Add import/export functionality (AC: 4)
- [ ] Create version history and rollback system (AC: 5)
- [ ] Build real-time scoring preview component (AC: 6)
- [ ] Implement role-based access control (AC: 7)

## Dev Notes
Frontend implementation for Story 5.7 backend. Must follow DEVELOPER_GUIDELINES.md for database-driven configuration. No hardcoded scoring logic in frontend code.

### Frontend Components
```typescript
// Scoring Parameter Management Component
interface ScoringParameter {
  id: number;
  category: string;
  parameter: string;
  weightage: number;
  active: boolean;
}

// Scoring Range Editor Component
interface ScoringRange {
  parameterId: number;
  deliveryMethod: 'transdermal' | 'transmucosal';
  score: number;
  rangeMin?: number;
  rangeMax?: number;
  isExclusion: boolean;
}

// Real-time Preview Component
interface ScoringPreview {
  testParameters: {
    dose: number;
    molecularWeight: number;
    meltingPoint: number;
    logP: number;
  };
  deliveryMethod: string;
  calculatedScore: number;
  exclusions: string[];
  recommendation: 'GO' | 'NO-GO';
}
```

### API Endpoints Required
```typescript
// Parameter Management
GET    /api/admin/scoring/parameters
POST   /api/admin/scoring/parameters
PUT    /api/admin/scoring/parameters/:id
DELETE /api/admin/scoring/parameters/:id

// Range Configuration
GET    /api/admin/scoring/ranges
POST   /api/admin/scoring/ranges
PUT    /api/admin/scoring/ranges/:id
DELETE /api/admin/scoring/ranges/:id

// Import/Export
POST   /api/admin/scoring/import
GET    /api/admin/scoring/export

// Version History
GET    /api/admin/scoring/history
POST   /api/admin/scoring/rollback/:version

// Preview
POST   /api/admin/scoring/preview
```

### UI/UX Requirements
1. **Responsive Design**: Mobile-friendly for tablet use in lab settings
2. **Color Coding**: Green (GO), Yellow (Caution), Red (NO-GO/Exclusion)
3. **Validation**: Real-time validation of range overlaps and gaps
4. **Charts**: Visual representation of scoring distributions
5. **Tooltips**: Contextual help for each parameter and scoring methodology
6. **Audit Trail**: Visible change history with user attribution
7. **Export Formats**: CSV, Excel, PDF for regulatory documentation

## Testing
Test CRUD operations for parameters and ranges, validation prevents overlapping ranges, import/export maintains data integrity, version history tracks all changes, and role-based access properly restricts functionality.

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-27 | 1.0 | Initial story creation | Bob (Scrum Master) |